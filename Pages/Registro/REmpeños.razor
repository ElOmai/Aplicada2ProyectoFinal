@page "/Registro/Empeños"
@page "/Registro/Empeños/{Id:int}"
@code {
    [Parameter]
    public int Id { get; set; }
    public Empeños Empeño { get; set; }
    public string Mensaje;
    EmpeñosController controller = new EmpeñosController();

    protected override void OnInitialized()
    {
        Limpiar();
        if (Id != 0)
        {
            Empeño = controller.Buscar(Id);
        }
    }

    private void Limpiar()
    {
        Empeño = new Empeños();
    }

    public void Guardar()
    {
        if (controller.Guardar(Empeño))
        {
            Limpiar();
            Mensaje = "Empeño Guardado con Exito!!!";
        }
        else
        {
            Limpiar();
            Mensaje = "Error al guardar Empeño";
        }
    }

    public void Buscar()
    {
        var articulo = controller.Buscar(Empeño.EmpeñoId);

        if (articulo != null)
        {
            Empeño = articulo;
        }
        else
        {
            Limpiar();
            Mensaje = "Empeño no Existe";
        }
    }

    public void Eliminar()
    {
        var articulo = controller.Buscar(Empeño.ArticuloId);

        if (articulo != null)
        {
            controller.Eliminar(Empeño.ArticuloId);
            Limpiar();
            Mensaje = "Empeño Eliminado";
        }
        else
        {
            Limpiar();
            Mensaje = "Error al eliminar";
        }
    }
}
